<div id="container" ng-controller="View1"><div ng-if="!config.hasRoles" class="header"><h3>People</h3><ul ui-layout-header-actions="" class="action-buttons"><li ng-click="dataService.refresh()" class="refresh"><img src="./images/icons/refresh.svg"/></li><li ng-if="mode=='edited'" ng-click="setMode('original')" class="edited"><table><tr><td><img src="./images/icons/edit.svg"/></td><td>edited</td></tr></table></li><li ng-if="mode=='original'" ng-click="setMode('edited')" class="edited"><table><tr><td><img src="./images/icons/server.svg"/></td><td>original</td></tr></table></li><li ng-class="{disabled:!changes.anyChange()}" ng-click="showChanges()" class="changes"><table><tr><td><img src="./images/icons/list.svg"/></td><td>changes</td></tr></table></li><li ng-class="{disabled:!changes.hist.hasUndo()}" ng-click="changes.hist.undo()" class="undo without-sign"><img src="./images/icons/undo.svg"/></li><li ng-class="{disabled:!changes.hist.hasRedo()}" ng-click="changes.hist.redo()" class="redo without-sign"><img src="./images/icons/redo.svg"/></li><li ng-click="showAccount()" class="account"><table><tr><td><img src="./images/icons/user.svg"/></td><td>account</td></tr></table></li></ul></div><table ng-if="config.hasRoles" ui-layout-header="" class="header"><tr><td valign="top" class="text"><h3>People</h3></td><td ui-layout-header-filters="" class="filters"><span class="speciality">Speciality:</span><ui-select ng-model="$parent.$parent.selectedRole" theme="selectize" ng-disabled="disabled" title="Choose a person" class="speciality ui-select"><ui-select-match placeholder="Select role...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="role in peopleRoles | filter: {name: $select.search}"><div ng-bind-html="role.name | highlight: $select.search"></div></ui-select-choices></ui-select><span class="contract">Contract:</span><ui-select ng-model="$parent.$parent.selectedCompany" theme="selectize" ng-disabled="disabled" title="Choose a person" class="contract ui-select"><ui-select-match placeholder="Select company...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="role in filterCompanies | filter: {name: $select.search}"><div ng-bind-html="role.name | highlight: $select.search"></div></ui-select-choices></ui-select><span class="workload">By workload:</span><ui-select ng-model="$parent.$parent.selectedLoad" theme="selectize" ng-disabled="disabled" title="Choose a person" class="workload ui-select"><ui-select-match placeholder="Select load...">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="role in filterLoad | filter: {name: $select.search}"><div ng-bind-html="role.name | highlight: $select.search"></div></ui-select-choices></ui-select></td><td valign="top" class="actions"><ul ui-layout-header-actions="" class="action-buttons"><li ng-click="dataService.refresh()" class="refresh"><img src="./images/icons/refresh.svg"/></li><li ng-if="mode=='edited'" ng-click="setMode('original')" class="edited"><table><tr><td><img src="./images/icons/edit.svg"/></td><td>edited</td></tr></table></li><li ng-if="mode=='original'" ng-click="setMode('edited')" class="edited"><table><tr><td><img src="./images/icons/server.svg"/></td><td>original</td></tr></table></li><li ng-class="{disabled:!changes.anyChange()}" ng-click="showChanges()" class="changes"><table><tr><td><img src="./images/icons/list.svg"/></td><td>changes</td></tr></table></li><li ng-class="{disabled:!changes.hist.hasUndo()}" ng-click="changes.hist.undo()" class="undo without-sign"><img src="./images/icons/undo.svg"/></li><li ng-class="{disabled:!changes.hist.hasRedo()}" ng-click="changes.hist.redo()" class="redo without-sign"><img src="./images/icons/redo.svg"/></li><li ng-click="showAccount()" class="account"><table><tr><td><img src="./images/icons/user.svg"/></td><td>account</td></tr></table></li></ul></td></tr></table><div style="width:{{layout.area1.width}}px;height:{{layout.height}}px"><div id="top-block" style="width:{{layout.area1.width}}px;height:{{layout.area1.height}}px"><div ng-if="view.dataStatus == 'load' || view.dataStatus == 'update'" class="load-spinner"><div class="spinner"><div class="dot1"></div><div class="dot2"></div></div></div><div ng-if="view.dataStatus == 'ready' || view.dataStatus == 'update'" class="sub-header"><div class="left-space"><div ng-if="view.hiddenPeopleCount &gt; 0" class="unhide"><span ng-click="view.unhideAll(); $event.preventDefault()" class="action">Unhide</span><span>{{view.hiddenPeopleCount + (view.hiddenPeopleCount == 1 ? ' person' : ' people')}}</span></div><!--.input-wrapper(ng-if='config.hasRoles')--><!--    input(type='text' ng-init='demo4=false' ng-focus='demo4=true' ng-blur='demo4=false')--><!--            i.fa.fa-search--><!--            span.demo-msg not working--></div><div class="prev-next-week"><button ng-click="view.periodChange(-1)" class="btn"><i class="fa fa-caret-left"></i></button></div><div ng-repeat="day in view.days" class="day"><strong ng-bind-html="filter.calendarHeader(day, &quot;date&quot;)"></strong><small ng-bind-html="filter.taskPeriod(day, &quot;workTime&quot;)"></small></div><div class="prev-next-week"><button ng-click="view.periodChange(1)" class="btn"><i class="fa fa-caret-right"></i></button></div></div><div ng-if="view.dataStatus == 'ready' || view.dataStatus == 'update'" class="people"><div style="height:{{layout.area1.height}}px" class="scroll-viewport"><div class="scroll-body"><div class="vertical-lines"><div class="col col1"></div><div class="col col2"></div><div class="col col3"></div><div class="col col4"></div><div class="col col5"></div><div class="col col6"></div><div class="col col7"></div><div class="col col8"></div><div class="col col9"></div></div><ul class="people-table"><li data-day="-1" ng-repeat="row in view.rows" ng-class="{expand:row.expand}" rms-view1-drop-task="" style="{{expandedHeight(row)}}" class="person-row drop-zone"><div class="person-info"><table><tbody><tr><td class="hide"><img src="./images/icons/eye46.svg" ng-click="view.hideRow(row)" class="hide"/></td><td class="avatar"><img ng-src="{{row.person.avatar}}" alt="" class="avatar"/></td><td class="name">{{row.person.name}}</td><td class="expand"><div ng-click="row.expand =! row.expand" class="expand-icon"><i ng-if="!row.expand" class="fa fa-caret-down"></i><i ng-if="row.expand" class="fa fa-caret-up"></i></div></td></tr></tbody></table></div><div class="estimate"><strong>{{filter.taskPeriod(row.personDayStat, 'totalPeriodTime')}}</strong></div><div ng-repeat="dayStat in row.personDayStat.dayStats" data-day="{{$index}}" class="total drop-zone day{{$index}}"><span ng-if="dayStat.tasksCount&gt;0" class="task-count">{{dayStat.tasksCount}}</span><div style="width:{{dayTaskWidth(dayStat)}}%" class="loaded {{taskSummaryColor(dayStat)}}"><span>{{filter.taskPeriod(dayStat, 'tasksTotal')}}</span></div></div><div ng-show="row.expand" style="{{expandedHeight(row)}}" class="tasks"><ul><li ng-repeat="taskView in row.tasks" style="left:{{((3 * taskView.x + 8) * (100/30)).toFixed(5)}}%;top:{{Math.round(taskView.y*55)}}px;width:{{((taskView.len * 3 - 0.2) * (100/30)).toFixed(5)}}%" class="task"><div rms-task="taskView.task" ng-model="taskView.task" ng-class="{split:taskView.task.split, overdue: taskView.task.isOverdue(), &quot;no-estimate&quot;: taskView.task.estimate == null}" class="task-body"><span class="title">{{taskView.task.title}}</span><span ng-if="!taskView.split" class="duration">{{filter.taskPeriod(taskView.task, 'estimate')}}</span><span class="due-date">{{filter.shortDate(taskView.task, 'duedate')}}</span><ul ng-if="taskView.split" class="split-task"><li ng-repeat="duration in taskView.split"><span style="left: {{duration.x * 3/21 * 7/taskView.len * 100}}%" class="duration">{{filter.splitDuration(duration.plan)}}</span></li></ul></div></li></ul></div></li></ul></div></div></div></div><div ui-layout-resizer="horizontal" style="left:{{Math.round(layout.area1.width / 2 - 22.5)}}px;top:{{Math.round(layout.area1.height - 7.5) + 40}}px" class="handler handler-horiz"><i class="fa fa-caret-down"></i><i class="fa fa-caret-up"></i></div><div ng-controller="View2" ui-layout-container="" style="width:{{layout.area1.width}}px;height:{{layout.area2.height + (config.hasRoles ? 18 : 0)}}px" id="bottom-block"><div class="bottom-block-header"><div class="col-title"><h3>Scheduled<br/>tasks</h3></div></div><div class="col-late-tasks no-scroll"><div class="header"><h4>LATE TASKS</h4><!-- TODO: Fix it--><div class="sub-header-row"><small>{{period.lateTasksTotalHours}}  h</small></div></div><div style="height:{{layout.area2.height - 24}}px" class="scroll-viewport compensate-pre"><div class="scroll-body"><div class="tasks"><ul><li ng-repeat="task in view.tasksOverdue" class="task"><div rms-task="task" ng-model="task" ng-class="{split:task.split, overdue: task.isOverdue(), &quot;no-estimate&quot;: task.estimate == null}" class="task-body"><span class="title">{{task.title}}</span><span ng-if="!taskView.split" class="duration">{{filter.taskPeriod(task, 'estimate')}}</span><span class="due-date">{{filter.shortDate(task, 'duedate')}}</span><ul ng-if="taskView.split" class="split-task"><li ng-repeat="duration in taskView.split"><span style="left: {{duration.x * 3/21 * 7/taskView.len * 100}}%" class="duration">{{filter.splitDuration(duration.plan)}}</span></li></ul></div></li></ul></div></div></div></div><div class="col-not-assigned-tasks no-scroll"><div class="header"><h4>NOT ASSIGNED TASKS</h4></div><div style="height:{{layout.area2.height - 24}}px" class="scroll-viewport compensate-pre"><div class="scroll-body"><div class="vertical-lines"><div class="col col2"></div><div class="col col3"></div><div class="col col4"></div><div class="col col5"></div><div class="col col6"></div><div class="col col7"></div><div class="col col8"></div><div class="col col9"></div><div ng-repeat="day in $parent.view.days" rms-view2-day-drop-task="" class="drop-zone total day{{$index}}"></div><ul><li ng-repeat="taskView in view.tasksNotAssigned" style="left:{{((3 * taskView.x + 8) * (100/30)).toFixed(5)}}%;top:{{Math.round(taskView.y*55)}}px;width:{{((taskView.len * 3 - 0.2) * (100/30)).toFixed(5)}}%" class="task"><div rms-task="taskView.task" ng-model="taskView.task" ng-class="{split:taskView.task.split, overdue: taskView.task.isOverdue(), &quot;no-estimate&quot;: taskView.task.estimate == null}" class="task-body"><span class="title">{{taskView.task.title}}</span><span ng-if="!taskView.split" class="duration">{{filter.taskPeriod(taskView.task, 'estimate')}}</span><span class="due-date">{{filter.shortDate(taskView.task, 'duedate')}}</span><ul ng-if="taskView.split" class="split-task"><li ng-repeat="duration in taskView.split"><span style="left: {{duration.x * 3/21 * 7/taskView.len * 100}}%" class="duration">{{filter.splitDuration(duration.plan)}}</span></li></ul></div></li></ul></div></div></div></div></div></div><div ui-layout-resizer="vertical" style="left:{{Math.round(layout.area1.width - 7.5)}}px;top:{{40 + Math.round(layout.area1.height / 2 - 22.5)}}px" class="handler handler-vertical"><i class="fa fa-caret-left"></i><i class="fa fa-caret-right"></i></div><div ng-controller="View3" style="width:{{layout.area3.width}}px;height:{{layout.area3.height}}px" id="sidebar"><div ng-class="{narrow: layout.area3.width &lt; 420}" class="sub-header"><ul ng-show="layout.area3.width &gt;= 250" class="tabs"><li ng-click="sidebarTabs.clickSideBarTab(0)" ng-class="{active: sidebarTabs.active == 0}">{{layout.area3.width < 440 ? 'NO DUE DATE' : 'WITHOUT DUE DATE'}}</li><li ng-click="sidebarTabs.clickSideBarTab(1)" ng-class="{active: sidebarTabs.active == 1}">NEXT WEEK</li><li ng-click="sidebarTabs.clickSideBarTab(2)" ng-class="{active: sidebarTabs.active == 2}">{{layout.area3.width < 440 ? 'ALL TASKS' : 'ALL TASKS BY PROJECT'}}</li></ul></div><div class="content-block"><div ng-if="view.dataStatus =='load'" class="load-spinner"><div class="spinner"><div class="dot1"></div><div class="dot2"></div></div></div><ul rms-view3-drop-task="" style="height:{{layout.area3.height - 55}}px" class="tasks-block no-scroll"><div class="scroll-viewport"><div class="scroll-body"><li ng-repeat="project in view.projects" ng-click="toggleProjectExpanded(project); $event.stopPropagation()"><table class="project"><tr><td><i ng-if="!isProjectExpanded(project)" class="fa fa-caret-down"></i><i ng-if="isProjectExpanded(project)" class="fa fa-caret-up"></i></td><td><h3>{{project.project.name}}</h3></td></tr></table><div ng-repeat="todoList in project.todoLists" ng-if="isProjectExpanded(project)" class="task-list"><div ng-click="todoList.isExpand = !todoList.isExpand; $event.stopPropagation()" class="task-list-title"><table class="todo-list"><tr><td><i ng-if="!todoList.isExpand" class="fa fa-caret-down"></i><i ng-if="todoList.isExpand" class="fa fa-caret-up"></i></td><td><h4>{{todoList.todoList.name}} (Tasks: {{todoList.tasksCount}}. Estimate: {{filter.taskPeriod(todoList, 'totalEstimate')}} )</h4></td></tr></table></div><table ng-if="todoList.isExpand" class="task-list-items"><tr ng-repeat="task in todoList.tasks"><td class="col1"><div rms-task="task" ng-model="task" class="view3-task">{{task.title}}</div></td><td class="col2"><strong>{{filter.taskPeriod(task, 'estimate')}}</strong></td></tr></table></div></li></div></div></ul></div></div></div>